/////////////////////////////////////////////////////
///////////////现代军品库v0.98/////////////////
/////////////////////////////////////////////////////


----------安装和注意事项----------

本MOD仅适用于EE系列的博德之门游戏，无法用于原版SOA和TOB等。

添加了一个出售现代军用装备的商人，BG1和龙矛在博德之门的巫术杂货店二楼，SOA在商旅集镇，TOB在绿洲。

商人出售很多经典枪械，以及各种军用物资。有些强力物品（如无人机、机器狗等）不会在游戏早期出现。

枪械使用独特的全新武器系统和熟练度，具体见后继说明。

使用无人机时需要注意：无人机在室外会处于高空状态，免疫各种范围伤害法术，且不会成为敌人主动攻击的目标；如果是在室内则没有这些效果，会容易被打坏。

实力充足时，可以对商人提出挑战，获得亮眼的奖励。

由于本MOD需要对游戏中的所有铠甲进行处理，请尽量在其它装备MOD之后安装。


----------枪械系统----------

1.武器特效

枪械有一定概率打出额外伤害、流血、减速、震慑、击退甚至击倒等特效，一般来说口径越大、动能越高的枪械特效越强。无生命对象和大体型生物对大部分特效免疫（尤其是小口径枪械的特效）。

停止力较强的手枪类攻击无甲/轻甲（衣服、皮甲、法袍之类）单位打出特效的概率高，穿透力较强的步枪类对重甲（铠甲和全身铠甲之类）单位打出特效的概率高。对中甲（锁子甲、直行链甲之类）单位的效果一般介于两者之间。天生具备坚硬甲壳的生物（掘地虫、土巨怪等）被视为身着重甲。

枪械打出特效时，一般都会伴随额外伤害。总的平均伤害和DND 3.5e和5e的现代武器篇基本一致。

枪械的攻击除了会被“防护远程武器”“防护魔法武器”等法术阻挡，无论单发还是连发。石肤术和铁皮术也能阻挡枪械的伤害和特殊效果，但可能被动能过强的枪械击退。

（枪械的动画是十字弓，本人的水平不足以新增武器动画，各位将就吧。）

2.供弹具和连发

供弹具分为子弹/弹匣/弹鼓/弹带四种，为简便起见所有枪械通用。

装填子弹可进行单发射击，装填弹匣是短点射，装填弹鼓是长点射，弹带是扫射。

一般来说短点射是对单个目标打出3~5发子弹，长点射是对45°范围内每个生物打出1~3发子弹，扫射是90°范围攻击。

不同枪械所适配的供弹具有所区别，比如某些步枪只能装填子弹打单发，某些连发的机枪只能装填弹匣/弹鼓/弹带进行点射扫射等等。请注意阅读物品说明，枪械和弹药不适配时无法正常使用。

点射扫射时每枚子弹的伤害和特效都独立计算，具体数值由枪械决定。

3.武器熟练度

枪械采用十字弓熟练度作为武器熟练度，但人物在使用枪械时，原有的十字弓熟练度会被暂时屏蔽（可能需要等一轮时间）。

可以在战斗中使用枪械来积累经验，积累到一定程度就有机会提升熟练度。或者在商人处进行训练，每次训练提升1星熟练度，但最多只能训练到3星，4星和5星只能通过积累获得。

单发射击对经验的提升比较少，短点射提升经验的速度一般，长点射和扫射则可以大幅提升经验。

提升的熟练度可以像正常武器熟练度一样加强枪械的命中和攻击次数，但不能提升每发子弹的伤害。

在熟练度达到3星时，视为人物获得第一级的“自动武器熟练”，达到5星视为获得第二级的“自动武器熟练”。“自动武器熟练”能让点射和扫射有比平时更多的子弹命中对手，具体效果视枪械而定，对一些射速很快但连发很难控制的枪械来说会是极大的加强。

人物将枪械替换成其它武器后，枪械对应的十字弓熟练度会消失（可能需要等一轮时间），回归原有的十字弓熟练度。

4.每轮攻击次数（APR）

枪械的基础APR主要决定枪械单发射击的速度，不同枪械有一定差别，此数值为综合参考后坐力、是否自动、单双手持用、拉栓流畅度、是否架在地上射击等因素决定。

人物持枪时的APR可以正常受到武器熟练度、战士职业加成、加速术和特殊装备的加成。

枪械单发射击时为正常APR，但连发射击时需要消耗额外的攻击时间（此时玩家自身行动暂停）导致实际APR降低。枪械数据中的攻击速度（即武器出手速度）对实际APR也有一点点影响。

以现实中600RPM（每秒10发）的枪械进行短点射（现实中3~5发子弹）在游戏中耗时约1/2秒；进行长点射（现实中5~8发子弹）耗时约1秒；进行扫射耗时约5/3秒（以现实中15发子弹进行计算）。

射速低于600RPM的枪械进行点射和扫射需要消耗更多时间，射速高于600RPM的枪械消耗时间不变但能对每个敌人打出更多子弹（部分枪械存在例外，物品说明会提及）。

5.故障

枪械是会出故障的（人物头上会出现提示），轻微故障可以自行花一轮时间修理，严重故障要拿去商人处修。

枪械损坏时人物会优先换上其它远程武器，次优先换近战武器，所以最好给人物配上备用枪械。

6.近战补偿

博德之门游戏中手持远程武器的人物，在被敌人接近（4漳冢┦被嵩馐芄セ骷於-8、被攻击检定-4的惩罚，而使用手枪、冲锋枪、霰弹枪、短突这样的近战武器不应该遭受这种惩罚，因此做了补偿。

具体补偿的实现机能是，当敌人进入持枪玩家4漳谑保持短枪者获得命中+8有利、防御+4有利的补偿。不过每秒只能进行一次距离判断，不一定及时。


----------版本历史----------

v0.98

修正人物的枪械熟练度提后带来的额外扫射命中经常不生效的问题

v0.97

枪械上刺刀会消失的问题修正
枪械特效概率的问题修正，现在可以正常打出击倒等特殊效果
枪械对部分铠甲无特殊效果的问题修正
枪械致命一击时必然造成额外伤害并且击倒敌人，并且根据子弹动能有不同效果（部分生物对这些效果免疫）
无法通过战斗积累提升枪械熟练度的问题修正
QLU-11不显示适配弹药的问题修正
枪械损坏的问题修正，并且枪械损坏后人物会自动换上备用武器继续攻击（优先选择远程武器）
枪械培训显示100金币实收1000金币的问题修正
坦克不会因为被吸取属性而死亡

v0.96

修正坦克AI安装时报错的问题。
修正无人机动画可能不出现的问题。
修正无人机在高空状态也会被地面范围攻击波及的问题。
给无人机添加了飞跃障碍的功能（限室外）。

v0.95

添加了英文版。
又修正一些细节问题。

v0.94

修正狙击榴攻击时总是显示枪弹不匹配的问题。
修正轻微损坏枪械无法正常修理的问题。
修正坦克近距离不会进行碾压的问题。
搭乘坦克后，对背刺、等级吸取、龙翼、蛛网、等效果免疫。
初期取消一些比较强力的装备，改成在SOD、SOA和TOB逐步出现。

v0.93

修正EET无法安装的问题。
在进行BGEE或EET游戏时，商人最初出现在那西凯矿场并赠送一些便宜货。
修正地雷在地面不显示的问题。
修正手电筒和电击盾的BUG。

v0.92

可以向商人发起挑战，战利品为坦克。难度比较高，建议中后期挑战。

v0.91

修正各种细节错误。

v0.9

又双重做了一次几乎所有物品的图像，谢天谢地EE版支持比原版大得多的图像，而且这次学会了批处理一键扣图。
不再支持非EE版本。
彻底重置武器连发机制，尽可能向真实靠拢。
弹药和枪械不匹配时打不出效果也没有伤害，且有文字提示。
删除了售卖的冷兵器和铠甲，只留下热武器等。
热武器列表稍微修改，且添加了机器狗和无人机等先进武器。
一些武器的细节修改。

v0.5 

又双重做了一次几乎所有物品的图像。增加猫图。
枪械仅在单发射击时，有每轮攻击次数的区别，在扫射时所有枪械每轮攻击次数均降到1（？）。
不同口径和射速的枪械在扫射时，会对目标打出不同的子弹数，并以不同的几率造成特效。
防暴叉生效时间调整。

v0.4

又重做了几乎所有物品的图像（花了好久！虽然还是不完美，但比之前好多了）。
略微下调枪械伤害，大幅度下调枪械射速（限制每轮最多攻击5次，不再有拿着自动武器就处于高等加速状态的情况）；作为补偿，部分射速极快的武器增加了少许命中和伤害。
再次精简了物品说明，且物品说明大幅度规范化。
取消狙击步枪的超高命中，改为使用瞄准镜后才临时获得额外的远程命中加成。
修正各种细节BUG，比如火焰喷射器作用不正常、清醒剂不免疫昏睡等等。
镇静剂现在可以免疫和消除小明式六亲不认狂暴。
合金系列铠甲的图像改为游戏中原有铠甲（美工做的太糟了T_T）。
生命探测仪可以探测到隐形的中立生物（可以找到拿着大法师杖被开除的队友了）。
56式改成SKS步枪（其实一回事）。
增加防暴叉、催泪喷雾、强光手电筒、STG-44、BAR、米尼米等武器，删除电锯（这玩意当武器用实在不靠谱）。
电棍等失能系武器提升豁免难度。
部分物品的数值进行了微调。
加入数件来自辐射系列的彩蛋物品（各位找找看？）

v0.3

重做了许多物品的图像。
子弹和枪械威力大大降低，部分手榴弹和地雷的威力也有所降低。
根据枪械和子弹特征设计了击中时有一定概率出现特效，并根据目标的铠甲类型进行区分，具体可以看枪械的描述文字。而防弹衣和头盔可以防止一部分特效。
枪械损坏的概率正常化（大约万分之几的样子，由具体枪械决定），修正严重损坏情况不出现的错误（是不是不修正还好点……），且损坏时会出现动画提示。
扫射大体型生物时随体型大小有不同的伤害提升。
霰弹枪可以用于开锁（不能直接射门，需要在物品能力里面点选）。
附魔的战术格斗刀可以投掷后自动飞回。
增加了部分特殊子弹/地雷/手榴弹的可购买数量。
初期可以获得一套子弹复装工具。
EE版的镇静剂可以消除绝大部分魅惑状态（原版还是做不到）。
闪光弹和震撼弹的有效范围增加到30眨以及其它一些细节的数据调整。
精简了物品说明。

v0.2

完成EE版本，感谢c4_angel帮了大忙！不然到现在还在为编码头疼。

v0.1

完成BG2和BGT版本。